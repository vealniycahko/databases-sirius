docker-compose.yml:

```yaml
version: '3.8'

services:
  elasticsearch:
    container_name: elasticsearch_db2022
    image: bitnami/elasticsearch:8.5.0
    ports:
      - "41554:9200"
    extra_hosts:
      - "host.docker.internal:host-gateway"
  kibana:
    container_name: kibana_db2022
    image: bitnami/kibana:7.17.7
    environment:
      - KIBANA_ELASTICSEARCH_URL=host.docker.internal
      - KIBANA_ELASTICSEARCH_PORT_NUMBER=41554
    ports:
      - "23699:5601"
    depends_on:
      - elasticsearch
    extra_hosts:
      - "host.docker.internal:host-gateway"
```

Все операции с ElasticSearch осуществляются через REST. Запросы лучше выполнять через Postman, у curl проблемы с кириллицей.

### Создание индекса:

```shell
curl --location --request PUT 'localhost:41554/equipment' \
--header 'Content-Type: application/json' \
--data-raw '{
    "settings": {
        "index": {
            "number_of_shards": 1,
            "number_of_replicas": 0
        }
    },
    "mappings": {
        "properties": {
            "title": {
                "type": "keyword"
            },
            "count": {
                "type": "long"
            },
            "type": {
                "type": "keyword"
            },
            "weight": {
                "type": "long"
            },
            "price": {
                "type": "scaled_float",
                "scaling_factor": 100
            },
            "holder_phone": {
                "type": "keyword"
            }
        }
    }
}'
```

"Аналог" в SQL:

```sql
create table equipment
(
    title        text primary key,
    count        int,
    type         text,
    weight       int,
    price        numeric,
    holder_phone text
);
```

### Вставка данных:

```shell
curl --location --request POST 'localhost:41554/_bulk' \
--header 'Content-Type: application/json' \
--data-raw '{"index":{"_index":"equipment","_id":"Дротик"}}
{"title":"Дротик","count":9,"type":"Дартс","weight":8,"price":65,"holder_phone":"0001"}
{"index":{"_index":"equipment","_id":"Защитный комплект"}}
{"title":"Защитный комплект","count":8,"weight":780,"price":2300,"type":"Фигурное катание","holder_phone":"0003"}
{"index":{"_index":"equipment","_id":"Коньки"}}
{"title":"Коньки","count":7,"weight":920,"price":1990,"type":"Фигурное катание","holder_phone":"0002"}
'
```

Аналог в SQL:

```sql
insert into equipment (title, count, type, weight, price, holder_phone)
values ('Дротик', 9, 'Дартс', 8, 65, '0001'),
       ('Коньки', 7, 'Фигурное катание', 920, 1990, '0002'),
       ('Защитный комплект', 8, 'Фигурное катание', 780, 2300, '0003');
```

### Получение документа по id:

```shell
curl --location --request GET 'localhost:41554/equipment/_doc/Коньки'
```

Аналог в SQL:

```sql
select *
from equipment
where title = 'Коньки';
```

### Обновление документа:

```shell
curl --location --request POST 'localhost:41554/equipment/_update/Коньки' \
--header 'Content-Type: application/json' \
--data-raw '{
    "doc": {
        "price": 2000
    }
}'
```

Аналог в SQL:

```sql
update equipment
set price = 2000
where title = 'Коньки';
```

### Удаление документа:

```shell
curl --location --request DELETE 'localhost:41554/equipment/_doc/Коньки'
```

Аналог в SQL:

```sql
delete
from equipment
where title = 'Коньки';
```

### Удаление индекса:

```shell
curl --location --request DELETE 'localhost:41554/equipment'
```

Аналог в SQL:

```sql
drop table if exists equipment;
```
